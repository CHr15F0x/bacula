
          Release Notes for Bacula 1.33

  Bacula code: Total files = 283 Total lines = 84,818 (*.h *.c *.in)

New directives:
- "Close on Poll = yes/no" in SD Device resource.
- "Volume Poll Interval = time-interval" in SD Device resource.
- "Two EOF = yes/no" in SD Device resource.
- "Maximum Network Buffer Size = size" in SD Device resource.
- "Maximum Network Buffer Size = size" in FD FileDaemon (or Client) resource.
- "Console" new resource in Director conf file.
     New directives: Name, Description, Password, JobACL, ClientACL,
        StorageACL, ScheduleACL, RunACL, PoolACL, CommandACL,
        FileSetACL, CatalogACL.
- "Max Run Time = duration" in Director Job resource.
- "Max Wait Time = duration" in Director Job resource (not fully implemented).
- "JobDefs = name-of-resource" in Director Job resource.
- "Jobdefs" new resource in Director. Same directives as for a Job.
- "Full Backup Pool = xxx" in Job resource in the Director.
- "Incremental Backup Pool = xxx" in Job resource in the Director.
- "Differential Backup Pool = xxx" in Job resource in the Director.
- Three new options on the Run override statement in a Schedule resource:
   FullPool=xxx
   IncrementalPool=xxx
   DifferentialPool=xxx

New Commands:
- "SetIP"
- Added "pool=xxx" to restore command line.
- Added "fileset=xxx" to restore command line.
- Fixed "storage=xxx" on restore command line.
- "markdir" command in restore tree.
- "unmarkdir" command in restore tree.
- "quit" command in restore tree.

Most Significant Changes since 1.32d
- The ability to ask the Storage daemon on a device by device basis
  to "poll" the tape drive at a given interval (minimum 1 minute). If
  a tape is found, its label is read and if appropriate it is used.
  This eliminates the need to do "mount" commands.
- The ability to close and re-open the device when a poll occurs. 
  This permits dealing with certain recalcitrant autochangers that
  invalidate devices (typically on FreeBSD).
- Dan Langille has written a PostgreSQL driver for Bacula.
- Implement "update slots scan" that reads the volume label(s).
- The full form of the scan is "scan=1,2,4-5,7". With no specification,
  all occupied slots are scanned.
- Turn off changer Volumes that are not current in the changer when
  an "update slots" is done, or if any tape operation discovers that
  the right volume is not in the slot.
- The console program will run all commands it finds in ~/.bconsolerc
  at startup.
- Add Dan Langille's changes to the bacula start/stop script that 
  permit dropping root permissions just after startup.
- New version 1.5.5-1 Cygwin.
- Modify SD to update the catalog database when it is shutdown,
  even if the job is canceled.
- Fixed seg fault in restore of multiple simultaneous jobs to 
  a single Volume.
- Fixed thread race problem in multiple simultaneous jobs to
  a single Volume where the volume lable is not in the first 
  tape block, so the tape is not recognized.

Other Changes since 1.32d
- Restore directory tree automatically selects all higher level
  directories to be restored.
- Implement conio.c to use in console program -- mini-readline.
- Enhance "fill" command of btape -- simpler output. Use -v to
  cause last block to be dumped after write and after re-read.
- Added an autochanger test to the btape "test" command. It is 
  automatically invoked if the autochanger is properly configured.  It
  is still a bit primitive but covers the essential of testing
  the mtx-changer script with your autochanger.
- Select the oldest LastWritten volume during recycling.
- Added forward space file test to btape "test" command.
- All 1.32d patches applied.
- Fixed seg fault in restore of multiple simultaneous jobs to 
  a single Volume.
- Fixed thread race problem in multiple simultaneous jobs to
  a single Volume where the volume lable is not in the first 
  tape block, so the tape is not recognized.

Items to note:  !!!!!
- FreeBSD users NOTE!!!!!
  You MUST add the following two records to your SD Device resource for
  tape drives.

     TWOEOF = yes
     Fast Forward Space File = no

- The daemon protocol has changed, you must update everything at once.
- The database level has been updated. You must either re-initialize
  your databases with:
   
    ./drop_bacula_tables
    ./make_bacula_tables

  which will delete ALL prior catalog information, or you can
  update your database with:

    ./update_bacula_tables
- smtp has now become bsmtp
- console has now become bconsole.
- console.conf is now bconsole.conf
- Please don't underestimate the repercussions of the bsmtp and bconsole 
  name changes!
