              Technical notes on version 1.37  
                      Nicolas Boichat

General:

Changes to 1.37.*:
16Oct05
 - scripts/dvd-handler: "zero" brand-new DVD+/-RW to fix a problem with some
   DVD-writers, thanks to Arno Lehmann for reporting this, and providing the
   way to fix it.
 - new scripts/dvd-handler. Note: it also needs a patched version of dvd+rw-tools.
 - new scripts/dvd-freespace. Note: it needs a patched version of dvd+rw-tools.
 - dvd.c:dvd_write_part: Don't write empty part. (Fix 4GB crossing bug reported by Arno Lehmann)
14Oct05
 - dvd.c:dvd_write_part: Use part_size and not max_part_size when setting write timeout.
 - dvd.c:do_mount_dev: When checking if the DVD is mounted, do not count ., .. and .keep (needed on Gentoo).
15Aug05
 - Convert dvd-writepart to Python.
 - Increase delay from 3 seconds to 5 seconds between SIGTERM and SIGKILL when
   killing external programs.
13Aug05
 - Add gettext macros in autoconf/gettext-macros.
 - Modify how localedir is set in configure.in.
 - Remove setlocale check (useless).
10Aug05
 - Mark translatable strings in all source files.
08Aug05
 - Create French and Italian translation files (fr.po, it.po).
 - Add support for translation in configure and Makefiles.
 - Update autoconf/aclocal.m4 so it is automatically created with aclocal
   (Note: autoconf/gnome-macros is not used anymore, it may be removed).
30Jul05
 - Fix src/lib/bpipe.c:run_program and run_program_full_output to detect if the watchdog
   killed the program, and return an error if it is the case.
26Apr05
 - Modify parse_config to get a LEX_ERROR_HANDLER as a parameter 
 - lex_open_file now returns NULL if the file can't be opened. All calling functions have
   been adapted.
 - Remove set_exit_on_error function
07Apr05
 - Fix "unknown device type" problem with DVD devices.
 - Fix crash when there is no media in the DVD drive.
09Jan05
 - Update the documentation and ReleaseNotes.
05Jan05
 - Add FreeSpaceCommand in Device (SD configuration file) and implement it.
 - Some modifications (again) on how guessed volume names are handled (now it should work).
 - Part files on the hard disk are removed if they are empty.
04Jan05
 - Major fixes on how guessed volume names are handled.
 - Minor fix in src/stored/append.c.
 - Replace, when possible, POOLMEM by POOL_MEM in the new code of src/stored/dev.c.
 - New script, scripts/dvd-freespace, which gets the free space available on a writable DVD.
03Jan05
 - Add WritePartAfterJob directive in Job resource (Director)
 - Add WritePartAfterJob directive in Schedule Resource (Director)
 - Implement these new directives
02Jan05
 - New function, open_guess_name_dev in src/stored/dev.c, which tries to guess the volume
   name of a mounted device, so the label can be read.  
 - New script, scripts/dvd-writepart, which write parts to DVD+/-R(W).
 - Removed WriteFirstPartCommand directive in Device (SD configuration file).
 - Use readdir_r instead of readdir (src/stored/dev.c:open_guess_name_dev).
01Jan05
 - Add RequiresMount, MountPoint, MountCommand, UnmountCommand directives in Device (SD configuration file).
 - Implement these directives (volumes can now be restored from a manually written DVD). 
 - Add WriteFirstPartCommand, WritePartCommand directives in Device (SD configuration file).
 - Implement these directives (DVD writing now works).
 - New function run_program_full_output in src/lib/bpipe.c.
 - Lots of bugfixes and cleanups in the new code.
29Dec04
 - Add VolParts field in Media table
 - Add MaximumPartSize directive in Device (SD configuration file)
 - File Volumes can now be splitted in multiple files ("parts")
 - Fix SQL error in sql_list while doing "llist jobmedia"
